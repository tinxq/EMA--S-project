<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emo-Tion for English</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #d0afed;
        text-align: center;
        color: #333;
        margin: 0;
    }
    img { width: 120px; height: auto; }
    header {
        position: fixed;
        top: 0; left: 0; right: 0;
        background-color: #18181b;
        color: rgb(114, 37, 133);
        transform: translateY(0);
        transition: transform 0.3s ease-in-out;
        z-index: 1000;
    }
    .map-img {
        width: 300px; 
        height: auto;
        border: 2px solid #4c0b50; 
        border-radius: 10px; 
    }
    .header-container {
        max-width: 1280px;
        margin: auto;
        padding: 16px 32px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    nav a { color: rgb(193, 82, 227); text-decoration: none; margin: 0 10px; font-weight: bold; }
    nav a:hover { text-decoration: underline; }
    .socials a { color: rgb(192, 32, 251); font-size: 20px; margin: 0 8px; }
    .home-page, .quiz-page { padding-top: 120px; }
    .ad-banner {
        margin: 20px auto;
        padding: 20px;
        background: #cfa2e2;
        border-radius: 15px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        max-width: 600px;
    }
    button {
        background-color: #5d0b8f;
        color: white;
        padding: 12px 25px;
        margin: 15px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 18px;
    }
    button:hover { background-color: #b023ec; }
    .hidden { display: none; }
    .success {
        background-color: #d8c8e6;
        color: #2e7d32;
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
    }
    .fail {
        background-color: #ffcdd2;
        color: #b71c1c;
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
    }
    .question-card {
        background-color: #ffe6f0;
        border-radius: 15px;
        padding: 20px;
        margin: 20px auto;
        max-width: 500px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        text-align: center;
    }
    .question-text {
        font-size: 18px;
        margin-bottom: 15px;
        font-weight: bold;
        color: #444;
    }
    .option {
        background-color: rgb(239, 204, 255);
        border: 2px solid #620679;
        border-radius: 10px;
        padding: 10px;
        margin: 8px 0;
        cursor: pointer;
        transition: 0.3s;
        display: flex;
        align-items: center;
        text-align: left;
    }
    .option:hover { background-color: #eab6ff; color: white; }
    .option input { margin-right: 10px; transform: scale(1.3); }
</style>
<link rel="icon" type="image/png" href="photos/logo.png">
</head>
<body>

<header id="main-header">
    <div class="header-container">
        <nav class="socials">
            <a href="https://instagram.com" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
            <a href="https://facebook.com" target="_blank"><i class="fab fa-facebook"></i></a>
            <a href="https://wa.me/09999999" target="_blank"><i class="fab fa-whatsapp"></i></a>
        </nav>
        <nav class="links">
            <a href="#" onclick="showHome()">Home</a>
        </nav>
    </div>
</header>

<div class="home-page" id="homePage">
    <h1></h1>
    <div class="ad-banner"><img src="photos/ema2.PNG    " alt="photo"></div>
    <div class="ad-banner"></div>
    <button onclick="startQuiz()">حدد مستواك</button>
</div>

<div class="quiz-page hidden" id="quizPage">
    <h1 id="top"></h1>
    <div class="container">
        <div id="quiz"></div>
        <div id="message" class="message hidden"></div>
        <button id="nextBtn" onclick="nextLevel()" class="hidden">Next Level</button>
    </div>
    <section id="contact" style="margin-top:30px; padding:15px; background-color:#f8f0ff; border-radius:10px;">
        <p>Email: <a href="ema@lwa.com">youremail@example.com</a></p>
        <p>WhatsApp: <a href="https://wa.me/09999999" target="_blank">+966500000000</a></p>
    </section>
</div>
<script>
    function startQuiz() {
        document.getElementById("homePage").classList.add("hidden");
        document.getElementById("quizPage").classList.remove("hidden");
        loadLevel();
    }
    
    function showHome() {
        document.getElementById("quizPage").classList.add("hidden");
        document.getElementById("homePage").classList.remove("hidden");
    }
    
    const levels = [ "Pre1", "A1", "A2", "B1", "B2"];
    let currentLevel = 0;
    let scores = {}; // store correct answers per level
    const passThreshold = 4; // minimum correct answers to pass a level
    
    const questions = {
       "Pre1": [
            { q: "What the color of this?", img: "photos/orange.png", options: ["Green", "Yellow", "Orange"], answer: "Orange" },
            { q: "", img: "photos/sarah.jpg", options:["She name is Sarah", "Her name is Sarah.", "His name is Sarah."], answer: "Her name is Sarah." },
            { q: "The apple's color is......<br>The grape's color is.......<br>These are.........", img: "photos/fru.png", options: ["Red, purple , vegetables", "Orange, purple , fruits", "Red, purple , fruits."], answer: "Red, purple , fruits." },
            { q: "This is a.....",img: "photos/hospital.png", options: ["Hospital", "School", "House"], answer: "Hospital" },
            { q: "The meaning of this word is:", img: "photos/teacher.JPG", options: ["The person who teaches people.", "The person who heal people", "The person who cook for people"], answer: "The person who teaches people." }
        ],
        "A1": [
            { q: "What is the date", img: "photos/17may.png", options: ["May seventeenth", "Seventeen May", "May seventeen"], answer: "May seventeenth" },
            { q: "What's the right answer to this question? <br>What do you do?", options: ["I'm fine thank you", "I am a doctor", "It's a big car"], answer: "I am a doctor" },
            { q: "Put the right word to complete the sentence.<br>I like him, he always Says yes to his mum, he is a............ Boy.", options: ["Naughty", "Beautiful", "Good"], answer: "Good" },
            { q: "She is.......",img:"photos/hungery.PNG" ,options: ["Hungry", "Angry", "Food"], answer: "Hungry" },
            { q: "Sam Always............. In the park at this time of the day.", img:"photos/walking.png" , options: ["Walking", "Walks", "Walk"], answer: "Walks" }
        ],
        "A2": [
            { q: "Dear John... How was Ema's day?", options: ["Outstanding", "Horrible", "Lovely"], answer: "Horrible" },
            { q: "Which sentence is correct", options: ["ema spent last vacation in London", "Ema spend last vacation in London", "Ema spent last vacation in London"], answer: "Ema spent last vacation in London" },
            { q: "While you are standing next to the school...", img:"photos/map2.jpg", imgClass:"map-img", options: ["Take Flower Road north...", "Go up Park Street...", "Walk along School Road until..."], answer: "Walk along School Road until you reach Tree Street, then turn right. Keep going past the playground and you’ll see Shop Road ahead on your left" },
            { q: "Watch out! The car......", options: ["Came", " Come", "Is coming"], answer: "Is coming" },
            { q: "What was the man's job?", audio: "photos/A2-1.mp3", options: ["Journalist", "Writer", "Postman"], answer: "Postman" }
        ],
        "B1": [
            { q: "How can you describe William's personality?", audio: "photos/B1-1.mp3", options: ["Reliable and obliging", "courageous and stingy", "Self-centered"], answer: "Reliable and obliging" },
            { q: "What's the meaning of collaboration?", options: ["Having both time and energy.", "Asking for help from others", "Working together to do something."], answer: "Working together to do something." },
            { q: "She.......... In Paris before.", options: ["Has been", "Was", "Had been"], answer: "Has been" },
            { q: "What period of time she is talking about?",  audio: "photos/B1-2.mp3",options: ["Teenage", "Adulthood", "Childhood"], answer: "Childhood" },
            { q: "I...........  be there at 07:00 , I planned this.", options: ["Will", "am going to", "May"], answer: "am going to" }
        ],
        "B2": [
            { q: "How does he feel about where he grew up now?", audio: "photos/B2-1.mp3", options: ["Enthusiasm", "Boredom", "Frustration"], answer: "Frustration" },
            { q: "From whom should she ask for help?", options: ["Vet", "psychologist", "Neurologist"], answer: "psychologist" },
            { q: "What does 'cognizant' mean?",  options: ["Indifferent", "Aware", "Negligent"], answer: "Aware" },
            { q: "What's the meaning of self - conscious?", audio: "photos/B2-2.mp3", options: ["Feeling awkward and shy", "Being confident", "It's part of your mind that's controls actions"], answer: "Feeling awkward and shy" },
            { q: "What can we infer about Sarah’s personality?", options: ["She is uninterested in creative activities.", "She prefers outdoor sports", "She has an appreciation for aesthetics and culture."], answer: "She has an appreciation for aesthetics and culture." }
        ]};
    
    function loadLevel() {
        const quizDiv = document.getElementById("quiz");
        quizDiv.innerHTML = `<h2>Level: ${levels[currentLevel]}</h2>`;
    
        questions[levels[currentLevel]].forEach((item, index) => {
            let html = `<div class="question-card">`;
            html += `<div class="question-text">${index + 1}. ${item.q || ""}</div>`;
            if(item.img) html += `<img src="${item.img}" alt="" class="${item.imgClass || ''}">`;
            if(item.audio) html += `<audio controls src="${item.audio}"></audio>`;
            item.options.forEach(opt => {
                html += `<label class="option"><input type="radio" name="q${index}" value="${opt}" onchange="checkAnswer(${index}, '${opt}')"> ${opt}</label>`;
            });
            html += `<div class="feedback" id="feedback${index}" style="margin-top:5px;font-weight:bold;"></div>`;
            html += `</div>`;
            quizDiv.innerHTML += html;
        });
    
        document.getElementById("nextBtn").classList.remove("hidden");
    }
    
    function checkAnswer(index, selected) {
        const item = questions[levels[currentLevel]][index];
        const feedback = document.getElementById(`feedback${index}`);
        if(selected === item.answer) {
            feedback.textContent = "✔ Correct";
            feedback.style.color = "green";
            scores[levels[currentLevel]] = scores[levels[currentLevel]] || 0;
            // increase score only once
            if(!feedback.dataset.correct) {
                scores[levels[currentLevel]]++;
                feedback.dataset.correct = "true";
            }
        } else {
            feedback.textContent = `❌ Wrong — correct: ${item.answer}`;
            feedback.style.color = "red";
        }
    
        // check if all questions answered
        const allAnswered = questions[levels[currentLevel]].every((_, i) => {
            const f = document.getElementById(`feedback${i}`);
            return f.textContent !== "";
        });
    
        //if(allAnswered) {
        // document.getElementById("nextBtn").classList.remove("hidden");
       // }
    }
    
    function nextLevel() {
        currentLevel++;
        if(currentLevel < levels.length) {
            loadLevel();
        } else {
            showFinalResult();
        }
    }
    
    function showFinalResult() {
        document.getElementById("nextBtn").classList.add("hidden");    
    const quizDiv = document.getElementById("quiz");
    quizDiv.innerHTML = "";
    const messageDiv = document.getElementById("message");
    messageDiv.classList.remove("hidden");

    let html = "<h2>Test Results</h2>";
    let finalLevel = "Pre0"; // default if student fails Pre1

    // Loop through levels in order
    for (let i = 0; i < levels.length; i++) {
        const level = levels[i];
        const numQs = questions[level].length;
        const correct = scores[level] || 0;
        html += `<p><strong>${level}:</strong> ${correct} / ${numQs}</p>`;

        // If student passes this level, update finalLevel
        if (correct >= passThreshold) {
            finalLevel = level;
        } 
    }

    html += `<p><strong>Final Level:</strong> ${finalLevel}</p>`;
    messageDiv.innerHTML = html;
}
    // Header scroll effect (kept from your original code)
    let prevScrollPos = window.scrollY;
    const header = document.getElementById("main-header");
    window.addEventListener("scroll", function () {
        const currScrollPos = window.scrollY;
        if (prevScrollPos > currScrollPos) {
            header.style.transform = "translateY(0)";
        } else {
            header.style.transform = "translateY(-200px)";
        }
        prevScrollPos = currScrollPos;
    });
    </script>
    
    
</body>
</html>
